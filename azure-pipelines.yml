jobs:
- job: Docker
  pool:
    vmImage: 'ubuntu-16.04'
  timeoutInMinutes: 120
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.6'
      architecture: 'x64'
  - script: |
      pip install docker-compose humanfriendly conan conan-package-tools
      python build.py
    env:
      DOCKER_PASSWORD: $(DOCKER_PASSWORD)
      DOCKER_CACHE: True
  strategy:
    matrix:
      Ubuntu GCC 10 CCI:
        GCC_VERSIONS: "10"
        BUILD_CONAN_CCI: 1
      Ubuntu GCC 9 CCI:
        GCC_VERSIONS: "9"
        BUILD_CONAN_CCI: 1
      Ubuntu GCC 8 CCI:
        GCC_VERSIONS: "8"
        BUILD_CONAN_CCI: 1
      Ubuntu GCC 7 CCI:
        GCC_VERSIONS: "7"
        BUILD_CONAN_CCI: 1
      Ubuntu GCC 6 CCI:
        GCC_VERSIONS: "6"
        BUILD_CONAN_CCI: 1

      Ubuntu Clang 10 CCI:
        CLANG_VERSIONS: "10"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 9 CCI:
        CLANG_VERSIONS: "9"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 8 CCI:
        CLANG_VERSIONS: "8"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 7 CCI:
        CLANG_VERSIONS: "7"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 6 CCI:
        CLANG_VERSIONS: "6.0"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 5 CCI:
        CLANG_VERSIONS: "5.0"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 4 CCI:
        CLANG_VERSIONS: "4.0"
        BUILD_CONAN_CCI: 1
      Ubuntu Clang 3.9 CCI:
        CLANG_VERSIONS: "3.9"
        BUILD_CONAN_CCI: 1
